{
    "version": "https://jsonfeed.org/version/1",
    "title": "𝕺𝖚𝖗 𝕷𝖎𝖋𝖊 • All posts by \"shell\" tag",
    "description": "记录生活 | 为众人抱薪者,不可使其扼于风雪",
    "home_page_url": "https://pangbai.work",
    "items": [
        {
            "id": "https://pangbai.work/randomacg/",
            "url": "https://pangbai.work/randomacg/",
            "title": "Linux桌面使用随机二刺螈壁纸",
            "date_published": "2023-09-13T08:48:30.000Z",
            "content_html": "<p>在 Linux 桌面使用随机二刺螈壁纸<br />\n一个很简单的 shell</p>\n<span id=\"more\"></span>\n<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>总所周知，涩图是第一生产力<br />\n如果桌面壁纸单调那么，那一定会影响工作和学习效率 (bushi<br />\n 壁纸千千万，均以自然风景和抽象图片居多，在 linux 下更是如此，<br />\n如果我们想要看不完的二次元壁纸，那指定会要点功夫<br />\n以下我利用简单的 shell 脚本实现随机桌面壁纸。</p>\n<h2 id=\"材料\"><a class=\"anchor\" href=\"#材料\">#</a> 材料</h2>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_0\">  一个随机壁纸 api:<span class=\"exturl\" data-url=\"aHR0cHM6Ly9hcGkuc3V5YW53LmNuL2FwaS9jb21pYyglRTUlOEYlQUYlRTUlODglQjAlRTclOTklQkUlRTUlQkElQTYlRTUlQUYlQkIlRTYlODklQkUp\">https://api.suyanw.cn/api/comic (可到百度寻找)</span></label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_1\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_1\"> 一个 Linux 壁纸软件:variety (桌面环境自带的也许也行，但是效果不确定)</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_2\"> 一双手，一个脑子，一只像 PangBai 一样热心网友 (doge)</label></li>\n</ul>\n<h2 id=\"原理\"><a class=\"anchor\" href=\"#原理\">#</a> 原理</h2>\n<p>没啥原理，就是通过启动终端的配置文件执行指定脚本，脚本会下载图片，下载完成后替换图片，壁纸自动刷新显示<br />\n因为不希望耗费太多资源，壁纸更换就是当你每次启动终端的时候<br />\n如果你想要定时更换功能，可以自己设计</p>\n<h2 id=\"步骤\"><a class=\"anchor\" href=\"#步骤\">#</a> 步骤</h2>\n<p>编辑一个脚本文件，这里我们叫它 start_run, 位置随意</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span>  --no-proxy <span class=\"token parameter variable\">-q</span> <span class=\"token parameter variable\">-O</span>  临时壁纸存放位置 https://api.suyanw.cn/api/comic </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$?</span> <span class=\"token parameter variable\">-eq</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\"># 下载成功，替换旧图片</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token function\">mv</span> 零食壁纸存放位置 当前壁纸所在位置</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\"># 下载失败，不替换图片</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"下载失败\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">fi</span></pre></td></tr></table></figure><p>解释一下脚本执行<br />\n绕过代理，静默下载壁纸文件<br />\n这里存在两个路径，一个是临时壁纸存放位置如 /tmp/download.jpg，用于下载缓冲一个当前壁纸所在位置 (如 /home/pangbai/ 图片 /random.jpg), 这个就是我们在 variety 要选择的壁纸，<br />\n有人可能会问，为什么要两个文件呢，那是因为下载壁纸覆盖的过程会导致壁纸空缺，很难看。</p>\n<p>修改 shell 启动配置<br />\n这里涉及到你使用的 shell 的类型<br />\n执行</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">chmod</span> +x start_run</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">echo</span> <span class=\"token environment constant\">SHELL</span></pre></td></tr></table></figure><p>查看你当前 shell, 一般是 bash 或者 zsh<br />\nbash 就编辑 \\～/.bashrc,zsh 就编辑 \\～/.zshrc<br />\n 在文件最后一行添加脚本执行命令如</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>/home/pangbai/start_run <span class=\"token operator\">&amp;</span></pre></td></tr></table></figure><h1 id=\"\"><a class=\"anchor\" href=\"#\">#</a> </h1>\n<p>修改壁纸设置<br />\n把 variety 默认壁纸来源全部取消了<br />\n添加壁纸图片 /home/pangbai/ 图片 /random.jpg</p>\n<h2 id=\"完结\"><a class=\"anchor\" href=\"#完结\">#</a> 完结</h2>\n<p>每次你启动命令行执行命令都会为你更新一次壁纸，很方便呢</p>\n",
            "tags": [
                "Linux",
                "shell"
            ]
        }
    ]
}